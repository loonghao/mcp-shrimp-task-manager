# 切換 AI 模型

這個工具允許你切換到不同的 AI 提供商和模型。

## 主要功能

- **提供商切換**：切換到指定的 AI 提供商
- **模型選擇**：選擇不同類型的模型（主要、研究、備用）
- **可用性驗證**：驗證提供商和模型的可用性
- **歷史記錄**：記錄切換歷史和原因
- **狀態反饋**：提供切換後的模型信息

## 模型類型說明

- **main**: 主要模型，用於常規任務和日常操作
- **research**: 研究模型，用於複雜分析和深度思考
- **fallback**: 備用模型，用於故障轉移和成本控制

## 使用場景

- 根據任務類型選擇最適合的模型
- 在主模型不可用時切換到備用模型
- 測試不同模型的性能和效果
- 根據成本考慮選擇經濟的模型
- 利用特定模型的專業能力

## 參數說明

### providerId (必需)
要切換到的 AI 提供商ID

### modelType (可選)
模型類型，可選值：
- `main`: 主要模型（默認）
- `research`: 研究模型
- `fallback`: 備用模型

### reason (可選)
切換原因，用於記錄和審計

## 切換條件

切換必須滿足以下條件：
- 目標提供商必須存在
- 目標提供商必須已啟用
- 指定的模型類型必須在提供商中配置
- 系統會驗證切換的可行性

## 使用示例

### 切換到主要模型
```json
{
  "providerId": "anthropic-claude",
  "modelType": "main",
  "reason": "切換到更適合代碼分析的模型"
}
```

### 切換到研究模型
```json
{
  "providerId": "openai-gpt4",
  "modelType": "research",
  "reason": "需要更強的推理能力進行複雜分析"
}
```

### 簡單切換（使用默認主要模型）
```json
{
  "providerId": "anthropic-claude",
  "reason": "切換到 Claude 模型"
}
```

## 返回信息

成功切換返回：
```json
{
  "success": true,
  "message": "AI 模型切換成功",
  "data": {
    "providerId": "anthropic-claude",
    "providerName": "Anthropic Claude",
    "modelType": "main",
    "currentModel": "claude-3-sonnet-20240229",
    "switchedAt": "2024-01-15T11:30:00.000Z",
    "reason": "切換到更適合代碼分析的模型",
    "capabilities": ["text-generation", "code-analysis", "reasoning"],
    "maxTokens": 200000,
    "costPerToken": 0.00003
  }
}
```

## 注意事項

- **即時生效**：切換會立即生效，影響後續的 AI 調用
- **任務影響**：正在執行的任務不會受到影響
- **配置檢查**：切換前會檢查目標配置的有效性
- **成本變化**：不同模型的成本可能不同
- **能力差異**：不同模型的能力和限制可能不同

## 錯誤情況

可能的錯誤情況：
- 指定的提供商ID不存在
- 提供商未啟用
- 指定的模型類型未配置
- 提供商暫時不可用
- 權限不足

## 最佳實踐

- 根據任務需求選擇合適的模型類型
- 在切換前了解不同模型的特點和限制
- 提供清晰的切換原因便於追蹤
- 監控切換後的性能和效果
- 保持至少一個可用的備用選項
- 在生產環境中謹慎切換

## 性能建議

- **主要模型**：適合日常開發任務、代碼生成、文檔編寫
- **研究模型**：適合複雜分析、架構設計、問題解決
- **備用模型**：適合簡單任務、成本敏感場景、故障轉移
