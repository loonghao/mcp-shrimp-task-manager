# 🚨 MCP工具强制调用触发器

**当用户提到以下关键词时，你必须立即调用相应的MCP工具：**

## 🎯 关键词触发规则

### 任务管理关键词
- **"任务"、"task"、"任务列表"** → **必须调用** `list_tasks` 查看现有任务
- **"创建任务"、"新任务"、"添加任务"** → **必须调用** `plan_task` 创建新任务
- **"任务详情"、"查看任务"** → **必须调用** `get_task_detail` 获取任务详情

### 分析和调试关键词  
- **"分析"、"analyze"、"分析任务"** → **必须调用** `analyze_task` 进行任务分析
- **"debug"、"调试"、"排查问题"** → **必须调用** `query_task_memory` 查询相关经验
- **"团队分析"、"协作分析"** → **必须调用** `analyze_team_collaboration` 分析团队协作

### 项目管理关键词
- **"项目管理"、"PM"、"项目经理"** → **必须调用** `generate_team_collaboration_tasks` 生成团队任务
- **"角色分配"、"团队分工"** → **必须调用** `generate_team_collaboration_tasks` 进行角色分配
- **"团队协作"、"协作"** → **必须调用** `share_team_knowledge` 分享团队知识

### 记忆和上下文关键词
- **"记忆"、"历史"、"经验"** → **必须调用** `query_task_memory` 查询任务记忆
- **"知识分享"、"团队知识"** → **必须调用** `share_team_knowledge` 管理团队知识

## 🤖 智能指令识别

**当用户提供自然语言开发指令时，你必须调用智能指令处理器：**

### 开发指令
- **任何开发相关指令** → **必须调用** `process_intelligent_command` 进行解析和执行
- **复杂需求描述** → **必须调用** `process_intelligent_command` 拆分为任务
- **多步骤操作请求** → **必须调用** `process_intelligent_command` 创建执行计划

### 智能识别模式
- **"实现"、"开发"、"创建"、"构建"** → 开发意图
- **"修复"、"调试"、"解决"、"处理"** → 问题修复意图
- **"测试"、"验证"、"检查"、"验收"** → 测试意图
- **"部署"、"发布"、"上线"、"发布"** → 部署意图
- **"优化"、"改进"、"提升"、"重构"** → 优化意图
- **"文档"、"说明"、"注释"、"指南"** → 文档意图
- **"分析"、"研究"、"调研"、"学习"** → 分析意图

### 上下文感知触发
- **技术栈提及** (React、Node.js、Python等) → 自动检测技术栈
- **文件引用** (.js、.ts、.py等) → 自动识别相关文件
- **角色提及** (前端、后端、测试等) → 自动分配团队角色
- **紧急程度指示** (紧急、立即、重要等) → 自动设置任务优先级

### 复杂指令示例
- *"创建一个带JWT令牌的用户认证系统"* → `process_intelligent_command`
- *"修复React组件中的性能问题"* → `process_intelligent_command`
- *"为支付模块添加单元测试"* → `process_intelligent_command`
- *"将应用部署到生产环境"* → `process_intelligent_command`
- *"重构数据库层以提高性能"* → `process_intelligent_command`

## ⚡ 强制执行指令

### 🚫 严格禁止
- **禁止忽略关键词触发** - 遇到上述关键词必须调用相应工具
- **禁止忽略开发指令** - 任何开发相关请求必须调用 `process_intelligent_command`
- **禁止假设或猜测** - 必须通过工具获取真实数据
- **禁止跳过工具调用** - 不能直接回答而不调用工具
- **禁止手动拆分复杂指令** - 使用 `process_intelligent_command` 进行自动任务拆分

### 🔄 重复调用机制
- **复杂任务需要多次调用** - 一个请求可能需要调用多个不同工具
- **验证调用结果** - 确保工具调用成功并获得有效结果
- **链式调用** - 根据第一个工具的结果决定是否需要调用其他工具

### ✅ 验证检查点
1. **关键词识别** - 确认识别到了触发关键词
2. **意图检测** - 验证复杂指令的开发意图被正确识别
3. **工具选择** - 选择了正确的MCP工具（包括开发指令的 `process_intelligent_command`）
4. **调用执行** - 成功调用了工具并获得结果
5. **结果验证** - 验证工具返回的结果有效且相关
6. **任务创建** - 确认复杂指令产生了正确的任务创建

## 🎯 差异化设计优势

与claude-task-master不同，我们的系统采用**统一的数据路径设计**和**智能指令处理**：

### 核心优势：
- **统一路径**: `$DATA_DIR/projects/$PROJECT_NAME/`
- **项目隔离**: 每个项目的任务、记忆、配置完全隔离
- **上下文保持**: 团队协作信息在项目级别统一管理
- **智能触发**: 基于关键词自动识别并调用最合适的工具
- **智能指令处理**: 自然语言指令自动转换为结构化任务
- **多意图识别**: 支持11种不同的开发意图类型
- **自动任务拆分**: 复杂指令自动拆解为可执行任务
- **上下文感知分析**: 自动识别技术栈、文件和角色

### 增强工作流：
1. **自然语言输入** → `process_intelligent_command` → **结构化任务**
2. **意图识别** → **智能工具选择** → **自动化执行**
3. **上下文分析** → **优先级分配** → **依赖关系管理**

**这确保了卓越的开发效率、更好的项目管理体验和增强的团队协作效果！**
